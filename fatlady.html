<html>
<head>
<style>
.fullscreen-bg {
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    overflow: hidden;
    z-index: -100;
}

.fullscreen-bg__video {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}
</style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script>



$(document).ready(function(){
    var video=[];
    video[0] = document.getElementById('video0');
    video[1] = document.getElementById('video1');

    function prepareNextVideo(idxVideo,source,time,src){
      setTimeout(function() {
         $(source).attr("src",src)

          video[idxVideo].load();
          video[idxVideo].play();
          /*$("#video"+(idxVideo)).show();
          $("#video"+(idxVideo+1)%2).hide();*/
      }, time);
    }
    /*var source = document.createElement('source');*/

    $("#video0").html('<source id="v0" src="video/0.avi" type="video/mp4">');
    $("#video1").html('<source id="v1" src="" type="video/mp4">');

    var i=0;
    $("#video0").on('playing',function(){
      $("#video0").show();
      $("#video1").hide();
      var duration=video[0].duration;
      console.log("duration is "+duration);
      prepareNextVideo(1,'#v1',duration*1000-200,"video/1.avi");
    });
    $("#video1").on('playing',function(){
      $("#video1").show();
      $("#video0").hide();
      var duration=video[1].duration;
      console.log("duration is "+duration);
      prepareNextVideo(0,'#v0',duration*1000-200,"video/0.avi");
    });

    //source.setAttribute('src', 'video/0.avi');

    //video.appendChild(source);
    //$("#video").play();

    /*setTimeout(function() {
        video.pause();

       source.setAttribute('src', 'video/1.avi');

        video.load();
        video.play();
    }, 3000);*/

    $("#video").on('ended',function(){
      console.log("help");
      if(i==0){
        i=1;
      }else {
        i=0;
      }
      $("source").attr("src","video/"+i+".avi");
      video.load();
      video.play();
    });


    var connection = new WebSocket("ws://localhost:8000/websocketserver");
    // When the connection is open, send some data to the server
    connection.onopen = function () {
      connection.send('Ping'); // Send the message 'Ping' to the server
    };

    // Log errors
    connection.onerror = function (error) {
      console.log('WebSocket Error ' + error);
    };

    // Log messages from the server
    connection.onmessage = function (e) {
      console.log('Server: ' + e.data);
    };
});
</script>

</head>
<body>
    <div class="fullscreen-bg">
      <!-- loop -->
        <video id="video0" muted autoplay class="fullscreen-bg__video">
        <!-- <source src="videoe/video1.avi" type="video/mp4"> -->
        Your browser does not support the video tag.
        </video>
        <video id="video1" muted autoplay class="fullscreen-bg__video">
        <!-- <source src="videoe/video1.avi" type="video/mp4"> -->
        Your browser does not support the video tag.
        </video>
    </div>
</body>
</html>
